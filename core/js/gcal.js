(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?module.exports=e(require("jquery")):e(jQuery)})(function(e){function k(c,b,a,d,f){function l(b,a){var d=a||[{message:b}];(c.googleCalendarError||e.noop).apply(f,d);(f.options.googleCalendarError||e.noop).apply(f,d);g.warn.apply(null,[b].concat(a||[]))}var k="https://www.googleapis.com/calendar/v3/calendars/"+encodeURIComponent(c.googleCalendarId)+"/events?callback=?",m=c.googleCalendarApiKey||f.options.googleCalendarApiKey,
n=c.success,h;if(!m)return l("Specify a googleCalendarApiKey. See http://fullcalendar.io/docs/google_calendar/"),{};b.hasZone()||(b=b.clone().utc().add(-1,"day"));a.hasZone()||(a=a.clone().utc().add(1,"day"));d&&"local"!=d&&(h=d.replace(" ","_"));b=e.extend({},c.data||{},{key:m,timeMin:b.format(),timeMax:a.format(),timeZone:h,singleEvents:!0,maxResults:9999});return e.extend({},c,{googleCalendarId:null,url:k,data:b,startParam:!1,endParam:!1,timezoneParam:!1,success:function(b){var c=[],a;if(b.error)l("Google Calendar API: "+
b.error.message,b.error.errors);else if(b.items&&(e.each(b.items,function(b,a){var d=a.htmlLink||null;h&&null!==d&&(d=p(d,"ctz="+h));c.push({id:a.id,title:a.summary,start:a.start.dateTime||a.start.date,end:a.end.dateTime||a.end.date,url:d,location:a.location,description:a.description})}),a=[c].concat(Array.prototype.slice.call(arguments,1)),a=q(n,this,a),e.isArray(a)))return a;return c}})}function p(c,b){return c.replace(/(\?.*?)?(#|$)/,function(a,c,e){return(c?c+"&":"?")+b+e})}var g=e.fullCalendar,
q=g.applyAll;g.sourceNormalizers.push(function(c){var b=c.googleCalendarId,a=c.url,d;if(!b&&a){if(/^[^\/]+@([^\/\.]+\.)*(google|googlemail|gmail)\.com$/.test(a))b=a;else if((d=/^https:\/\/www.googleapis.com\/calendar\/v3\/calendars\/([^\/]*)/.exec(a))||(d=/^https?:\/\/www.google.com\/calendar\/feeds\/([^\/]*)/.exec(a)))b=decodeURIComponent(d[1]);b&&(c.googleCalendarId=b)}b&&(null==c.editable&&(c.editable=!1),c.url=b)});g.sourceFetchers.push(function(c,b,a,d){if(c.googleCalendarId)return k(c,b,a,d,
this)})});
