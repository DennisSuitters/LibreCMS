/**
 * Super simple wysiwyg editor on Bootstrap v0.5.2
 * http://hackerwins.github.io/summernote/
 *
 * summernote.js
 * Copyright 2013 Alan Hong. and outher contributors
 * summernote may be freely distributed under the MIT license./
 *
 * Date: 2014-04-12T04:54Z
 */
function sendFile(e,t,n){$("#saveFileBtn").addClass("libr8-btn-danger");$("#block").css({display:"block"});data=new FormData;data.append("file",e);$.ajax({data:data,type:"POST",url:"includes/summernote_upload.php",cache:false,contentType:false,processData:false,success:function(e){t.insertImage(n,e);$("#block").css({display:"none"})}})}(function(e){if(typeof define==="function"&&define.amd){define(["jquery","codemirror"],e)}else{e(window.jQuery,window.CodeMirror)}})(function(e,t){if("function"!==typeof Array.prototype.reduce){Array.prototype.reduce=function(e,t){var n,r,i=this.length>>>0,s=false;if(1<arguments.length){r=t;s=true}for(n=0;i>n;++n){if(this.hasOwnProperty(n)){if(s){r=e(r,this[n],n,this)}else{r=this[n];s=true}}}if(!s){throw new TypeError("Reduce of empty array with no initial value")}return r}}var n={bMac:navigator.appVersion.indexOf("Mac")>-1,bMSIE:navigator.userAgent.indexOf("MSIE")>-1,bFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(e.fn.jquery),bCodeMirror:!!t};var r=function(){var e=function(e){return function(t){return e===t}};var t=function(e,t){return e===t};var n=function(){return true};var r=function(){return false};var i=function(e){return function(){return!e.apply(e,arguments)}};var s=function(e){return e};return{eq:e,eq2:t,ok:n,fail:r,not:i,self:s}}();var i=function(){var e=function(e){return e[0]};var t=function(e){return e[e.length-1]};var n=function(e){return e.slice(0,e.length-1)};var i=function(e){return e.slice(1)};var s=function(e,t){var n=e.indexOf(t);if(n===-1){return null}return e[n+1]};var o=function(e,t){var n=e.indexOf(t);if(n===-1){return null}return e[n-1]};var u=function(e,t){t=t||r.self;return e.reduce(function(e,n){return e+t(n)},0)};var a=function(e){var t=[],n=-1,r=e.length;while(++n<r){t[n]=e[n]}return t};var f=function(n,r){if(n.length===0){return[]}var s=i(n);return s.reduce(function(e,n){var i=t(e);if(r(t(i),n)){i[i.length]=n}else{e[e.length]=[n]}return e},[[e(n)]])};var l=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){if(e[n]){t.push(e[n])}}return t};return{head:e,last:t,initial:n,tail:i,prev:o,next:s,sum:u,from:a,compact:l,clusterBy:f}}();var s=function(){var t=function(t){return t&&e(t).hasClass("note-editable")};var o=function(t){return t&&e(t).hasClass("note-control-sizing")};var u=function(e){var t=function(t){return function(){return e.find(t)}};return{editor:function(){return e},dropzone:t(".note-dropzone"),toolbar:t(".note-toolbar"),editable:t(".note-editable"),codable:t(".note-codable"),statusbar:t(".note-statusbar"),popover:t(".note-popover"),handle:t(".note-handle"),dialog:t(".note-dialog")}};var a=function(e){return function(t){return t&&t.nodeName===e}};var f=function(e){return e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName)};var l=function(e){return e&&/^UL|^OL/.test(e.nodeName)};var c=function(e){return e&&/^TD|^TH/.test(e.nodeName)};var h=function(e,n){while(e){if(n(e)){return e}if(t(e)){break}e=e.parentNode}return null};var p=function(e,t){t=t||r.fail;var n=[];h(e,function(e){n.push(e);return t(e)});return n};var d=function(t,n){var r=p(t);for(var i=n;i;i=i.parentNode){if(e.inArray(i,r)>-1){return i}}return null};var v=function(e,t){var n=[];var r=false,i=false;(function s(o){if(!o){return}if(o===e){r=true}if(r&&!i){n.push(o)}if(o===t){i=true;return}for(var u=0,a=o.childNodes.length;u<a;u++){s(o.childNodes[u])}})(d(e,t));return n};var m=function(e,t){t=t||r.fail;var n=[];while(e){n.push(e);if(t(e)){break}e=e.previousSibling}return n};var g=function(e,t){t=t||r.fail;var n=[];while(e){n.push(e);if(t(e)){break}e=e.nextSibling}return n};var y=function(e,t){var n=[];t=t||r.ok;(function i(r){if(e!==r&&t(r)){n.push(r)}for(var s=0,o=r.childNodes.length;s<o;s++){i(r.childNodes[s])}})(e);return n};var b=function(e,t){var n=t.nextSibling,r=t.parentNode;if(n){r.insertBefore(e,n)}else{r.appendChild(e)}return e};var w=function(t,n){e.each(n,function(e,n){t.appendChild(n)});return t};var E=a("#text");var S=function(e){if(E(e)){return e.nodeValue.length}return e.childNodes.length};var x=function(e){var t=0;while(e=e.previousSibling){t+=1}return t};var T=function(t,n){var s=i.initial(p(n,r.eq(t)));return e.map(s,x).reverse()};var N=function(e,t){var n=e;for(var r=0,i=t.length;r<i;r++){n=n.childNodes[t[r]]}return n};var C=function(e,t){if(t===0){return e}if(t>=S(e)){return e.nextSibling}if(E(e)){return e.splitText(t)}var n=e.childNodes[t];e=b(e.cloneNode(false),e);return w(e,g(n))};var k=function(e,t,n){var i=p(t,r.eq(e));if(i.length===1){return C(t,n)}return i.reduce(function(e,r){var i=r.cloneNode(false);b(i,r);if(e===t){e=C(e,n)}w(i,g(e));return i})};var L=function(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var n=e.parentNode;if(!t){var r=[];var i,s;for(i=0,s=e.childNodes.length;i<s;i++){r.push(e.childNodes[i])}for(i=0,s=r.length;i<s;i++){n.insertBefore(r[i],e)}}n.removeChild(e)};var A=function(e){return s.isTextarea(e[0])?e.val():e.html()};return{blank:n.bMSIE?"&nbsp;":"<br/>",emptyPara:"<p><br/></p>",isEditable:t,isControlSizing:o,buildLayoutInfo:u,isText:E,isPara:f,isList:l,isTable:a("TABLE"),isCell:c,isAnchor:a("A"),isDiv:a("DIV"),isLi:a("LI"),isSpan:a("SPAN"),isB:a("B"),isU:a("U"),isS:a("S"),isI:a("I"),isImg:a("IMG"),isTextarea:a("TEXTAREA"),ancestor:h,listAncestor:p,listNext:g,listPrev:m,listDescendant:y,commonAncestor:d,listBetween:v,insertAfter:b,position:x,makeOffsetPath:T,fromOffsetPath:N,split:k,remove:L,html:A}}();var o={version:"0.5.2",options:{width:null,height:null,focus:false,tabsize:null,styleWithSpan:true,disableLinkTarget:false,disableDragAndDrop:false,codemirror:null,lang:"en-US",direction:null,toolbar:[["save",["save"]],["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview"]],["help",["help"]]],oninit:function(){},onfocus:null,onblur:null,onenter:function(){e("#saveFileBtn").addClass("libr8-btn-danger")},onkeyup:function(){e("#saveFileBtn").addClass("libr8-btn-danger")},onkeydown:null,onImageUpload:function(e,t,n){sendFile(e[0],t,n)},onImageUploadError:null,onToolbarClick:null,keyMap:{pc:{"CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule"},mac:{"CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule"}}},lang:{"en-US":{save:{save:"Save"},font:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",tabUpload:"Upload",tabChoose:"Choose",tabLink:"Link",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select",fileBrowserTitle:"Choose from Uploaded Images",url:"URL",remove:"Remove Image"},link:{link:"Link",tabLink:"Link",tabChoose:"Choose File",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text",url:"URL",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, or DailyMotion)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}};var u=function(){var t=function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)}).promise()};var n=function(t){return e.Deferred(function(n){e("<img>").one("load",function(){n.resolve(e(this))}).one("error abort",function(){n.reject(e(this))}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()};return{readFileAsDataURL:t,createImage:n}}();var a={isEdit:function(e){return[8,9,13,32].indexOf(e)!==-1},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}};var f=function(){var t=function(t,r){if(n.jqueryVersion<1.9){var i={};e.each(r,function(e,n){i[n]=t.css(n)});return i}return t.css.call(t,r)};this.stylePara=function(t,n){e.each(t.nodes(s.isPara),function(t,r){e(r).css(n)})};this.current=function(n,r){var i=e(s.isText(n.sc)?n.sc.parentNode:n.sc);var o=["font-family","font-size","text-align","list-style-type","line-height"];var u=t(i,o)||{};u["font-size"]=parseInt(u["font-size"],10);u["font-bold"]=document.queryCommandState("bold")?"bold":"normal";u["font-italic"]=document.queryCommandState("italic")?"italic":"normal";u["font-underline"]=document.queryCommandState("underline")?"underline":"normal";u["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal";if(!n.isOnList()){u["list-style"]="none"}else{var a=["circle","disc","disc-leading-zero","square"];var f=e.inArray(u["list-style-type"],a)>-1;u["list-style"]=f?"unordered":"ordered"}var l=s.ancestor(n.sc,s.isPara);if(l&&l.style["line-height"]){u["line-height"]=l.style.lineHeight}else{var c=parseInt(u["line-height"],10)/parseInt(u["font-size"],10);u["line-height"]=c.toFixed(1)}u.image=s.isImg(r)&&r;u.anchor=n.isOnAnchor()&&s.ancestor(n.sc,s.isAnchor);u.aAncestor=s.listAncestor(n.sc,s.isEditable);return u}};var l=function(){var t=!!document.createRange;var n=function(e,t){var n=e.parentElement(),r;var o=document.body.createTextRange(),u;var a=i.from(n.childNodes);for(r=0;r<a.length;r++){if(s.isText(a[r])){continue}o.moveToElementText(a[r]);if(o.compareEndPoints("StartToStart",e)>=0){break}u=a[r]}if(r!==0&&s.isText(a[r-1])){var f=document.body.createTextRange(),l=null;f.moveToElementText(u||n);f.collapse(!u);l=u?u.nextSibling:n.firstChild;var c=e.duplicate();c.setEndPoint("StartToStart",f);var h=c.text.replace(/[\r\n]/g,"").length;while(h>l.nodeValue.length&&l.nextSibling){h-=l.nodeValue.length;l=l.nextSibling}var p=l.nodeValue;if(t&&l.nextSibling&&s.isText(l.nextSibling)&&h===l.nodeValue.length){h-=l.nodeValue.length;l=l.nextSibling}n=l;r=h}return{cont:n,offset:r}};var o=function(e){var t=function(e,n){var o,u;if(s.isText(e)){var a=s.listPrev(e,r.not(s.isText));var f=i.last(a).previousSibling;o=f||e.parentNode;n+=i.sum(i.tail(a),s.length);u=!f}else{o=e.childNodes[n]||e;if(s.isText(o)){return t(o,n)}n=0;u=false}return{cont:o,collapseToStart:u,offset:n}};var n=document.body.createTextRange();var o=t(e.cont,e.offset);n.moveToElementText(o.cont);n.collapse(o.collapseToStart);n.moveStart("character",o.offset);return n};var u=function(n,u,a,f){this.sc=n;this.so=u;this.ec=a;this.eo=f;var l=function(){if(t){var e=document.createRange();e.setStart(n,u);e.setEnd(a,f);return e}else{var r=o({cont:n,offset:u});r.setEndPoint("EndToEnd",o({cont:a,offset:f}));return r}};this.select=function(){var e=l();if(t){var n=document.getSelection();if(n.rangeCount>0){n.removeAllRanges()}n.addRange(e)}else{e.select()}};this.nodes=function(t){var o=s.listBetween(n,a);var u=i.compact(e.map(o,function(e){return s.ancestor(e,t)}));return e.map(i.clusterBy(u,r.eq2),i.head)};this.commonAncestor=function(){return s.commonAncestor(n,a)};var c=function(e){return function(){var t=s.ancestor(n,e);return!!t&&t===s.ancestor(a,e)}};this.isOnEditable=c(s.isEditable);this.isOnList=c(s.isList);this.isOnAnchor=c(s.isAnchor);this.isOnCell=c(s.isCell);this.isCollapsed=function(){return n===a&&u===f};this.insertNode=function(e){var n=l();if(t){n.insertNode(e)}else{n.pasteHTML(e.outerHTML)}};this.toString=function(){var e=l();return t?e.toString():e.text};this.bookmark=function(e){return{s:{path:s.makeOffsetPath(e,n),offset:u},e:{path:s.makeOffsetPath(e,a),offset:f}}}};return{create:function(e,r,i,s){if(arguments.length===0){if(t){var o=document.getSelection();if(o.rangeCount===0){return null}var a=o.getRangeAt(0);e=a.startContainer;r=a.startOffset;i=a.endContainer;s=a.endOffset}else{var f=document.selection.createRange();var l=f.duplicate();l.collapse(false);var c=f;c.collapse(true);var h=n(c,true),p=n(l,false);e=h.cont;r=h.offset;i=p.cont;s=p.offset}}else if(arguments.length===2){i=e;s=r}return new u(e,r,i,s)},createFromNode:function(e){return this.create(e,0,e,1)},createFromBookmark:function(e,t){var n=s.fromOffsetPath(e,t.s.path);var r=t.s.offset;var i=s.fromOffsetPath(e,t.e.path);var o=t.e.offset;return new u(n,r,i,o)}}}();var c=function(){this.tab=function(e,t){var n=s.ancestor(e.commonAncestor(),s.isCell);var r=s.ancestor(n,s.isTable);var o=s.listDescendant(r,s.isCell);var u=i[t?"prev":"next"](o,n);if(u){l.create(u,0).select()}};this.createTable=function(t,n){var r=[],i;for(var o=0;o<t;o++){r.push("<td>"+s.blank+"</td>")}i=r.join("");var u=[],a;for(var f=0;f<n;f++){u.push("<tr>"+i+"</tr>")}a=u.join("");var l='<table class="libr8-table libr8-table-bordered">'+a+"</table>";return e(l)[0]}};var h=function(){var t=new f;var r=new c;this.saveRange=function(e){e.data("range",l.create())};this.restoreRange=function(e){var t=e.data("range");if(t){t.select()}};this.currentStyle=function(e){var n=l.create();return n.isOnEditable()&&t.current(n,e)};this.undo=function(e){e.data("NoteHistory").undo(e)};this.redo=function(e){e.data("NoteHistory").redo(e)};var i=this.recordUndo=function(e){e.data("NoteHistory").recordUndo(e)};var o=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"];for(var a=0,h=o.length;a<h;a++){this[o[a]]=function(e){return function(t,n){i(t);document.execCommand(e,false,n)}}(o[a])}var p=function(t,n,r){i(t);var o=(new Array(r+1)).join("&nbsp;");n.insertNode(e('<span id="noteTab">'+o+"</span>")[0]);var u=e("#noteTab").removeAttr("id");n=l.create(u[0],1);n.select();s.remove(u[0])};this.tab=function(e,t){var n=l.create();if(n.isCollapsed()&&n.isOnCell()){r.tab(n)}else{p(e,n,t.tabsize)}};this.untab=function(){var e=l.create();if(e.isCollapsed()&&e.isOnCell()){r.tab(e,true)}};this.insertImage=function(e,t){u.createImage(t).then(function(t){i(e);t.css({display:"",width:Math.min(e.width(),t.width())});l.create().insertNode(t[0])}).fail(function(){var t=e.data("callbacks");if(t.onImageUploadError){t.onImageUploadError()}})};this.insertVideo=function(t,n){i(t);var r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var s=n.match(r);var o=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/;var u=n.match(o);var a=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var f=n.match(a);var c=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var h=n.match(c);var p=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var d=n.match(p);var v;if(s&&s[2].length===11){var m=s[2];v=e("<iframe>").attr("src","//www.youtube.com/embed/"+m).attr("width","640").attr("height","360")}else if(u&&u[0].length>0){v=e("<iframe>").attr("src",u[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(f&&f[0].length>0){v=e("<iframe>").attr("src",f[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(h&&h[3].length>0){v=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+h[3]).attr("width","640").attr("height","360")}else if(d&&d[2].length>0){v=e("<iframe>").attr("src","//www.dailymotion.com/embed/video/"+d[2]).attr("width","640").attr("height","360")}else{}if(v){v.attr("frameborder",0);l.create().insertNode(v[0])}};this.formatBlock=function(e,t){i(e);t=n.bMSIE?"<"+t+">":t;document.execCommand("FormatBlock",false,t)};this.formatPara=function(e){this.formatBlock(e,"P")};for(var a=1;a<=6;a++){this["formatH"+a]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(a)}this.fontSize=function(e,t){i(e);document.execCommand("fontSize",false,3);if(n.bFF){e.find("font[size=3]").removeAttr("size").css("font-size",t+"px")}else{e.find("span").filter(function(){return this.style.fontSize==="medium"}).css("font-size",t+"px")}};this.lineHeight=function(e,n){i(e);t.stylePara(l.create(),{lineHeight:n})};this.unlink=function(e){var t=l.create();if(t.isOnAnchor()){i(e);var n=s.ancestor(t.sc,s.isAnchor);t=l.createFromNode(n);t.select();document.execCommand("unlink")}};this.createLink=function(t,r,o){var u=l.create();i(t);var a=r;if(r.indexOf("@")!==-1&&r.indexOf(":")===-1){a="mailto:"+r}else if(r.indexOf("://")===-1){a="http://"+r}if((n.bMSIE||n.bFF)&&u.isCollapsed()){u.insertNode(e('<A id="linkAnchor">'+r+"</A>")[0]);var f=e("#linkAnchor").attr("href",a).removeAttr("id");u=l.createFromNode(f[0]);u.select()}else{document.execCommand("createlink",false,a);u=l.create()}e.each(u.nodes(s.isAnchor),function(t,n){if(o){e(n).attr("target","_blank")}else{e(n).removeAttr("target")}})};this.getLinkInfo=function(){var t=l.create();var n=true;var r="";if(t.isOnAnchor()){var i=s.ancestor(t.sc,s.isAnchor);t=l.createFromNode(i);n=e(i).attr("target")==="_blank";r=i.href}return{text:t.toString(),url:r,newWindow:n}};this.getVideoInfo=function(){var e=l.create();if(e.isOnAnchor()){var t=s.ancestor(e.sc,s.isAnchor);e=l.createFromNode(t)}return{text:e.toString()}};this.color=function(e,t){var n=JSON.parse(t);var r=n.foreColor,s=n.backColor;i(e);if(r){document.execCommand("foreColor",false,r)}if(s){document.execCommand("backColor",false,s)}};this.insertTable=function(e,t){i(e);var n=t.split("x");l.create().insertNode(r.createTable(n[0],n[1]))};this.floatMe=function(e,t,n){i(e);n.css("float",t)};this.resize=function(e,t,n){i(e);n.css({width:e.width()*t+"px",height:""})};this.resizeTo=function(e,t,n){var r;if(n){var i=e.y/e.x;var s=t.data("ratio");r={width:s>i?e.x:e.y/s,height:s>i?e.x*s:e.y}}else{r={width:e.x,height:e.y}}t.css(r)};this.removeMedia=function(e,t,n){i(e);n.detach()}};var p=function(){var e=[],t=[];var n=function(e){var t=e[0],n=l.create();return{contents:e.html(),bookmark:n.bookmark(t),scrollTop:e.scrollTop()}};var r=function(e,t){e.html(t.contents).scrollTop(t.scrollTop);l.createFromBookmark(e[0],t.bookmark).select()};this.undo=function(i){var s=n(i);if(e.length===0){return}r(i,e.pop());t.push(s)};this.redo=function(i){var s=n(i);if(t.length===0){return}r(i,t.pop());e.push(s)};this.recordUndo=function(r){t=[];e.push(n(r))}};var d=function(){this.update=function(t,n){var r=function(t,n){t.find(".libr8-dropdown-menu li a").each(function(){var t=e(this).data("value")+""===n+"";this.className=t?"checked":""})};var s=function(e,n){var r=t.find(e);r.toggleClass("active",n())};var o=t.find(".note-fontname");if(o.length>0){var u=n["font-family"];if(!!u){u=i.head(u.split(","));u=u.replace(/\'/g,"");o.find(".note-current-fontname").text(u);r(o,u)}}var a=t.find(".note-fontsize");a.find(".note-current-fontsize").text(n["font-size"]);r(a,parseFloat(n["font-size"]));var f=t.find(".note-height");r(f,parseFloat(n["line-height"]));s('button[data-event="bold"]',function(){return n["font-bold"]==="bold"});s('button[data-event="italic"]',function(){return n["font-italic"]==="italic"});s('button[data-event="underline"]',function(){return n["font-underline"]==="underline"});s('button[data-event="strikethrough"]',function(){return n["font-strikethrough"]==="strikethrough"});s('button[data-event="justifyLeft"]',function(){return n["text-align"]==="left"||n["text-align"]==="start"});s('button[data-event="justifyCenter"]',function(){return n["text-align"]==="center"});s('button[data-event="justifyRight"]',function(){return n["text-align"]==="right"});s('button[data-event="justifyFull"]',function(){return n["text-align"]==="justify"});s('button[data-event="insertUnorderedList"]',function(){return n["list-style"]==="unordered"});s('button[data-event="insertOrderedList"]',function(){return n["list-style"]==="ordered"})};this.updateRecentColor=function(t,n,r){var i=e(t).closest(".note-color");var s=i.find(".note-recent-color");var o=JSON.parse(s.attr("data-value"));o[n]=r;s.attr("data-value",JSON.stringify(o));var u=n==="backColor"?"background-color":"color";s.find("i").css(u,r)};this.updateFullscreen=function(e,t){var n=e.find('button[data-event="fullscreen"]');n.toggleClass("active",t)};this.updateCodeview=function(e,t){var n=e.find('button[data-event="codeview"]');n.toggleClass("active",t)};this.activate=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")};this.deactivate=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")}};var v=function(){var t=function(t,n){var r=e(n);var i=r.position(),s=r.height();t.css({display:"block",left:i.left,top:i.top+s})};this.update=function(e,n){var r=e.find(".note-link-popover");if(n.anchor){var i=r.find("a");i.attr("href",n.anchor.href).html(n.anchor.href);t(r,n.anchor)}else{r.hide()}var s=e.find(".note-image-popover");if(n.image){t(s,n.image)}else{s.hide()}};this.hide=function(e){e.children().hide()}};var m=function(){this.update=function(t,n){var r=t.find(".note-control-selection");if(n.image){var i=e(n.image);var s=i.position();var o={w:i.width(),h:i.height()};r.css({display:"block",left:s.left,top:s.top,width:o.w,height:o.h}).data("target",n.image);var u=o.w+"x"+o.h;r.find(".note-control-selection-info").text(u)}else{r.hide()}};this.hide=function(e){e.children().hide()}};var g=function(){var t=function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)};this.showImageDialog=function(n,r){return e.Deferred(function(e){var i=r.find(".note-image-dialog");var s=r.find(".note-image-input"),o=r.find(".note-image-url"),u=r.find(".note-image-btn");i.one("shown.bs.modal",function(){s.replaceWith(s.clone().on("change",function(){i.modal("hide");e.resolve(this.files)}));u.click(function(t){t.preventDefault();i.modal("hide");e.resolve(o.val())});o.keyup(function(){t(u,o.val())}).val("").focus()}).one("hidden.bs.modal",function(){n.focus();s.off("change");o.off("keyup");u.off("click")}).modal("show")})};this.showVideoDialog=function(n,r,i){return e.Deferred(function(e){var s=r.find(".note-video-dialog");var o=s.find(".note-video-url"),u=s.find(".note-video-btn");s.one("shown.bs.modal",function(){o.val(i.text).keyup(function(){t(u,o.val())}).trigger("keyup").trigger("focus");u.click(function(t){t.preventDefault();s.modal("hide");e.resolve(o.val())})}).one("hidden.bs.modal",function(){n.focus();o.off("keyup");u.off("click")}).modal("show")})};this.showLinkDialog=function(n,r,i){return e.Deferred(function(e){var s=r.find(".note-link-dialog");var o=s.find(".note-link-text"),u=s.find(".note-link-url"),a=s.find(".note-link-btn"),f=s.find("input[type=checkbox]");s.one("shown.bs.modal",function(){o.val(i.text);u.keyup(function(){t(a,u.val());if(!i.text){o.val(u.val())}}).val(i.url).trigger("focus");f.prop("checked",i.newWindow);a.one("click",function(t){t.preventDefault();s.modal("hide");e.resolve(u.val(),f.is(":checked"))})}).one("hidden.bs.modal",function(){n.focus();u.off("keyup")}).modal("show")}).promise()};this.showHelpDialog=function(e,t){var n=t.find(".note-help-dialog");n.one("hidden.bs.modal",function(){e.focus()}).modal("show")}};var y=function(){var r=new h;var i=new d,o=new v;var f=new m,l=new g;var c=function(t){var n=e(t).closest(".note-editor");return n.length>0&&s.buildLayoutInfo(n)};var y=function(t,n){r.restoreRange(t);var i=t.data("callbacks");if(i.onImageUpload){i.onImageUpload(n,r,t)}else{e.each(n,function(e,n){u.readFileAsDataURL(n).then(function(e){r.insertImage(t,e)}).fail(function(){if(i.onImageUploadError){i.onImageUploadError()}})})}};var b=function(e){if(s.isImg(e.target)){e.preventDefault()}};var w=function(e){var t=c(e.currentTarget||e.target);var n=r.currentStyle(e.target);if(!n){return}i.update(t.toolbar(),n);o.update(t.popover(),n);f.update(t.handle(),n)};var E=function(e){var t=c(e.currentTarget||e.target);o.hide(t.popover());f.hide(t.handle())};var S=function(t){if(s.isControlSizing(t.target)){var n=c(t.target),i=n.handle(),u=n.popover(),a=n.editable(),l=n.editor();var h=i.find(".note-control-selection").data("target"),p=e(h);var d=p.offset(),v=e(document).scrollTop();l.on("mousemove",function(e){r.resizeTo({x:e.clientX-d.left,y:e.clientY-(d.top-v)},p,!e.shiftKey);f.update(i,{image:h});o.update(u,{image:h})}).one("mouseup",function(){l.off("mousemove")});if(!p.data("ratio")){p.data("ratio",p.height()/p.width())}r.recordUndo(a);t.stopPropagation();t.preventDefault()}};var x=function(t){var n=e(t.target).closest("[data-event]");if(n.length>0){t.preventDefault()}};var T=function(o){var u=e(o.target).closest("[data-event]");if(u.length>0){var a=u.attr("data-event"),f=u.attr("data-value");var h=c(o.target);var p=h.editor(),d=h.toolbar(),v=h.dialog(),m=h.editable(),g=h.codable();var b;var E;var S=p.data("options");var x;if(e.inArray(a,["resize","floatMe","removeMedia"])!==-1){var T=h.handle();var N=T.find(".note-control-selection");x=e(N.data("target"))}if(r[a]){m.trigger("focus");r[a](m,f,x)}if(e.inArray(a,["backColor","foreColor"])!==-1){i.updateRecentColor(u[0],a,f)}else if(a==="showLinkDialog"){m.focus();var C=r.getLinkInfo();r.saveRange(m);l.showLinkDialog(m,v,C).then(function(e,t){r.restoreRange(m);r.createLink(m,e,t)})}else if(a==="showImageDialog"){m.focus();l.showImageDialog(m,v).then(function(e){if(typeof e==="string"){r.restoreRange(m);r.insertImage(m,e)}else{y(m,e)}})}else if(a==="showVideoDialog"){m.focus();var k=r.getVideoInfo();r.saveRange(m);l.showVideoDialog(m,v,k).then(function(e){r.restoreRange(m);r.insertVideo(m,e)})}else if(a==="showHelpDialog"){l.showHelpDialog(m,v)}else if(a==="fullscreen"){var L=e("html, body");var A=function(e){p.css("width",e.w);m.css("height",e.h);g.css("height",e.h);if(g.data("cmEditor")){g.data("cmEditor").setSize(null,e.h)}};p.toggleClass("fullscreen");var O=p.hasClass("fullscreen");if(O){m.data("orgHeight",m.css("height"));e(window).on("resize",function(){A({w:e(window).width(),h:e(window).height()-d.outerHeight()})}).trigger("resize");L.css("overflow","hidden")}else{e(window).off("resize");A({w:S.width||"",h:m.data("orgHeight")});L.css("overflow","auto")}i.updateFullscreen(d,O)}else if(a==="codeview"){p.toggleClass("codeview");var M=p.hasClass("codeview");if(M){g.val(m.html());g.height(m.height());i.deactivate(d);g.focus();if(n.bCodeMirror){E=t.fromTextArea(g[0],e.extend({mode:"text/html",lineNumbers:true},S.codemirror));var _=p.data("options").codemirror.tern||false;if(_){b=new t.TernServer(_);E.ternServer=b;E.on("cursorActivity",function(e){b.updateArgHints(e)})}E.setSize(null,m.outerHeight());if(E.autoFormatRange){E.autoFormatRange({line:0,ch:0},{line:E.lineCount(),ch:E.getTextArea().value.length})}g.data("cmEditor",E)}}else{if(n.bCodeMirror){E=g.data("cmEditor");g.val(E.getValue());E.toTextArea()}m.html(g.val()||s.emptyPara);m.height(S.height?g.height():"auto");i.activate(d);m.focus()}i.updateCodeview(h.toolbar(),M)}w(o)}};var N=24;var C=function(t){var n=e(document);var r=c(t.target).editable();var i=r.offset().top-n.scrollTop();n.on("mousemove",function(e){var t=e.clientY-(i+N);r.height(t)}).one("mouseup",function(){n.off("mousemove")});t.stopPropagation();t.preventDefault()};var k=18;var L=function(t){var n=e(t.target.parentNode);var r=n.next();var i=n.find(".note-dimension-picker-mousecatcher");var s=n.find(".note-dimension-picker-highlighted");var o=n.find(".note-dimension-picker-unhighlighted");var u;if(t.offsetX===undefined){var a=e(t.target).offset();u={x:t.pageX-a.left,y:t.pageY-a.top}}else{u={x:t.offsetX,y:t.offsetY}}var f={c:Math.ceil(u.x/k)||1,r:Math.ceil(u.y/k)||1};s.css({width:f.c+"em",height:f.r+"em"});i.attr("data-value",f.c+"x"+f.r);if(3<f.c&&f.c<10){o.css({width:f.c+1+"em"})}if(3<f.r&&f.r<10){o.css({height:f.r+1+"em"})}r.html(f.c+" x "+f.r)};var A=function(t){var n=e(),r=t.dropzone,i=t.dropzone.find(".note-dropzone-message");e(document).on("dragenter",function(e){var s=t.editor.hasClass("codeview");if(!s&&n.length===0){t.editor.addClass("dragover");r.width(t.editor.width());r.height(t.editor.height());i.text("Drag Image Here")}n=n.add(e.target)}).on("dragleave",function(e){n=n.not(e.target);if(n.length===0){t.editor.removeClass("dragover")}}).on("drop",function(){n=e();t.editor.removeClass("dragover")});r.on("dragenter",function(){r.addClass("hover");i.text("Drop Image")}).on("dragleave",function(){r.removeClass("hover");i.text("Drag Image Here")});r.on("drop",function(e){var t=e.originalEvent.dataTransfer;if(t&&t.files){var n=c(e.currentTarget||e.target);n.editable().focus();y(n.editable(),t.files)}e.preventDefault()}).on("dragover",false)};this.bindKeyMap=function(e,t){var n=e.editor;var i=e.editable;i.on("keydown",function(e){var s=[];if(e.metaKey){s.push("CMD")}if(e.ctrlKey){s.push("CTRL")}if(e.shiftKey){s.push("SHIFT")}var o=a.nameFromCode[e.keyCode];if(o){s.push(o)}var u=t[s.join("+")];if(u){e.preventDefault();r[u](i,n.data("options"))}else if(a.isEdit(e.keyCode)){r.recordUndo(i)}})};this.attach=function(e,t){var i=t.keyMap[n.bMac?"mac":"pc"];this.bindKeyMap(e,i);e.editable.on("mousedown",b);e.editable.on("keyup mouseup",w);e.editable.on("scroll",E);if(!t.disableDragAndDrop){A(e)}e.handle.on("mousedown",S);e.toolbar.on("click",T);e.popover.on("click",T);e.toolbar.on("mousedown",x);e.popover.on("mousedown",x);e.statusbar.on("mousedown",C);var s=e.toolbar;var o=s.find(".note-dimension-picker-mousecatcher");o.on("mousemove",L);e.editable.on("blur",function(){r.saveRange(e.editable)});e.editor.data("options",t);if(t.styleWithSpan&&!n.bMSIE){setTimeout(function(){document.execCommand("styleWithCSS",0,true)})}e.editable.data("NoteHistory",new p);if(t.onenter){e.editable.keypress(function(e){if(e.keyCode===a.ENTER){t.onenter(e)}})}if(t.onfocus){e.editable.focus(t.onfocus)}if(t.onblur){e.editable.blur(t.onblur)}if(t.onkeyup){e.editable.keyup(t.onkeyup)}if(t.onkeydown){e.editable.keydown(t.onkeydown)}if(t.onpaste){e.editable.on("paste",t.onpaste)}if(t.onToolbarClick){e.toolbar.click(t.onToolbarClick)}e.editable.data("callbacks",{onChange:t.onChange,onAutoSave:t.onAutoSave,onImageUpload:t.onImageUpload,onImageUploadError:t.onImageUploadError,onFileUpload:t.onFileUpload,onFileUploadError:t.onFileUpload})};this.dettach=function(e){e.editable.off();e.toolbar.off();e.handle.off();e.popover.off()}};var b=function(){var t,r,i,o,u;t={save:function(e){return'<button type="submit" id="saveFileBtn" class="libr8-btn libr8-btn-default" title="'+e.save.save+'" onclick="$(\'#saveFileBtn\').removeClass(\'libr8-btn-danger\');$(\'#block\').css({\'display\':\'block\'})"><i class="fa fa-save"></i></button>'},picture:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.image+'" data-event="showImageDialog"><i class="fa fa-picture-o"></i></button>'},link:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.link.link+'" data-event="showLinkDialog"><i class="fa fa-link"></i></button>'},video:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.video.video+'" data-event="showVideoDialog"><i class="fa fa-youtube-play"></i></button>'},table:function(e){return'<button type="button" class="libr8-btn libr8-btn-default libr8-dropdown-toggle" title="'+e.table.table+'" data-toggle="dropdown"><i class="fa fa-table"></i> <span class="libr8-caret"></span></button><ul class="libr8-dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>'},style:function(e){return'<button type="button" class="libr8-btn libr8-btn-default libr8-dropdown-toggle" title="'+e.style.style+'" data-toggle="dropdown"><i class="fa fa-magic"></i> <span class="libr8-caret"></span></button><ul class="libr8-dropdown-menu"><li><a data-event="formatBlock" data-value="p">'+e.style.normal+'</a></li><li><a data-event="formatBlock" data-value="blockquote"><blockquote>'+e.style.blockquote+'</blockquote></a></li><li><a data-event="formatBlock" data-value="pre">'+e.style.pre+'</a></li><li><a data-event="formatBlock" data-value="h1"><h1>'+e.style.h1+'</h1></a></li><li><a data-event="formatBlock" data-value="h2"><h2>'+e.style.h2+'</h2></a></li><li><a data-event="formatBlock" data-value="h3"><h3>'+e.style.h3+'</h3></a></li><li><a data-event="formatBlock" data-value="h4"><h4>'+e.style.h4+'</h4></a></li><li><a data-event="formatBlock" data-value="h5"><h5>'+e.style.h5+'</h5></a></li><li><a data-event="formatBlock" data-value="h6"><h6>'+e.style.h6+'</h6></a></li></ul>'},fontname:function(e){var t=["Serif","Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"];var n='<button type="button" class="libr8-btn libr8-btn-default libr8-btn-sm libr8-dropdown-toggle" data-toggle="dropdown" title="'+e.font.name+'"><span class="note-current-fontname">Arial</span> <b class="libr8-caret"></b></button>';n+='<ul class="libr8-dropdown-menu">';for(var r=0;r<t.length;r++){n+='<li><a data-event="fontName" data-value="'+t[r]+'"><i class="fa fa-check"></i> '+t[r]+'</a></li>'}n+='</ul>';return n},fontsize:function(e){return'<button type="button" class="libr8-btn libr8-btn-default libr8-dropdown-toggle" data-toggle="dropdown" title="'+e.font.size+'"><span class="note-current-fontsize">11</span> <b class="libr8-caret"></b></button><ul class="libr8-dropdown-menu"><li><a data-event="fontSize" data-value="8"><i class="fa fa-check"></i> 8</a></li><li><a data-event="fontSize" data-value="9"><i class="fa fa-check"></i> 9</a></li><li><a data-event="fontSize" data-value="10"><i class="fa fa-check"></i> 10</a></li><li><a data-event="fontSize" data-value="11"><i class="fa fa-check"></i> 11</a></li><li><a data-event="fontSize" data-value="12"><i class="fa fa-check"></i> 12</a></li><li><a data-event="fontSize" data-value="14"><i class="fa fa-check"></i> 14</a></li><li><a data-event="fontSize" data-value="18"><i class="fa fa-check"></i> 18</a></li><li><a data-event="fontSize" data-value="24"><i class="fa fa-check"></i> 24</a></li><li><a data-event="fontSize" data-value="36"><i class="fa fa-check"></i> 36</a></li></ul>'},color:function(e){return'<button type="button" class="libr8-btn libr8-btn-default note-recent-color" title="'+e.color.recent+'" data-event="color" data-value=\'{"backColor":"yellow"}\'><i class="fa fa-font-color" style="color:#000;background-color:#ff0"></i></button><button type="button" class="libr8-btn libr8-btn-default libr8-dropdown-toggle" title="'+e.color.more+'" data-toggle="dropdown"><span class="libr8-caret"></span></button><ul class="libr8-dropdown-menu"><li><div class="libr8-btn-group"><div class="note-palette-title">'+e.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+e.color.transparent+'">'+e.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="libr8-btn-group"><div class="note-palette-title">'+e.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">'+e.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>'},bold:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.font.bold+'" data-shortcut="Ctrl+B" data-mac-shortcut="⌘+B" data-event="bold"><i class="fa fa-bold"></i></button>'},italic:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.font.italic+'" data-shortcut="Ctrl+I" data-mac-shortcut="⌘+I" data-event="italic"><i class="fa fa-italic"></i></button>'},underline:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.font.underline+'" data-shortcut="Ctrl+U" data-mac-shortcut="⌘+U" data-event="underline"><i class="fa fa-underline"></i></button>'},strike:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.font.strike+'" data-event="strikethrough"><i class="fa fa-strikethrough"></i></button>'},clear:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.font.clear+'" data-shortcut="Ctrl+\\" data-mac-shortcut="⌘+\\" data-event="removeFormat"><i class="fa fa-eraser"></i></button>'},ul:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.lists.unordered+'" data-shortcut="Ctrl+Shift+8" data-mac-shortcut="⌘+⇧+7" data-event="insertUnorderedList"><i class="fa fa-list-ul"></i></button>'},ol:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.lists.ordered+'" data-shortcut="Ctrl+Shift+7" data-mac-shortcut="⌘+⇧+8" data-event="insertOrderedList"><i class="fa fa-list-ol"></i></button>'},paragraph:function(e){return'<button type="button" class="libr8-btn libr8-btn-default libr8-dropdown-toggle" title="'+e.paragraph.paragraph+'" data-toggle="libr8-dropdown"><i class="fa fa-align-left"></i> <span class="libr8-caret"></span></button><div class="libr8-dropdown-menu"><div class="note-align libr8-btn-group"><button type="button" class="libr8-btn libr8-btn-default" title="'+e.paragraph.left+'" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="⌘+⇧+L" data-event="justifyLeft"><i class="fa fa-align-left"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.paragraph.center+'" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="⌘+⇧+E" data-event="justifyCenter" tabindex="-1"><i class="fa fa-align-center"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.paragraph.right+'" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="⌘+⇧+R" data-event="justifyRight"><i class="fa fa-align-right"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.paragraph.justify+'" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="⌘+⇧+J" data-event="justifyFull"><i class="fa fa-align-justify"></i></button></div><div class="note-list libr8-btn-group"><button type="button" class="libr8-btn libr8-btn-default" title="'+e.paragraph.outdent+'" data-shortcut="Ctrl+[" data-mac-shortcut="⌘+[" data-event="outdent"><i class="fa fa-outdent"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.paragraph.indent+'" data-shortcut="Ctrl+]" data-mac-shortcut="⌘+]" data-event="indent"><i class="fa fa-indent"></i></button></div></div>'},height:function(e){return'<button type="button" class="libr8-btn libr8-btn-default libr8-dropdown-toggle" data-toggle="dropdown" title="'+e.font.height+'"><i class="fa fa-text-height"></i>&nbsp; <b class="libr8-caret"></b></button><ul class="libr8-dropdown-menu"><li><a data-event="lineHeight" data-value="1.0"><i class="fa fa-check"></i> 1.0</a></li><li><a data-event="lineHeight" data-value="1.2"><i class="fa fa-check"></i> 1.2</a></li><li><a data-event="lineHeight" data-value="1.4"><i class="fa fa-check"></i> 1.4</a></li><li><a data-event="lineHeight" data-value="1.5"><i class="fa fa-check"></i> 1.5</a></li><li><a data-event="lineHeight" data-value="1.6"><i class="fa fa-check"></i> 1.6</a></li><li><a data-event="lineHeight" data-value="1.8"><i class="fa fa-check"></i> 1.8</a></li><li><a data-event="lineHeight" data-value="2.0"><i class="fa fa-check"></i> 2.0</a></li><li><a data-event="lineHeight" data-value="3.0"><i class="fa fa-check"></i> 3.0</a></li></ul>'},help:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.options.help+'" data-event="showHelpDialog"><i class="fa fa-question"></i></button>'},fullscreen:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.options.fullscreen+'" data-event="fullscreen"><i class="fa fa-arrows-alt"></i></button>'},codeview:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.options.codeview+'" data-event="codeview"><i class="fa fa-code"></i></button>'},undo:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.history.undo+'" data-event="undo"><i class="fa fa-undo"></i></button>'},redo:function(e){return'<button type="button" class="libr8-btn libr8-btn-default" title="'+e.history.redo+'" data-event="redo"><i class="fa fa-repeat"></i></button>'}};r=function(e){return'<div class="note-popover"><div class="note-link-popover libr8-popover libr8-bottom libr8-in"><div class="libr8-arrow"></div><div class="libr8-popover-content note-link-content"><a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert libr8-btn-group"><button type="button" class="libr8-btn libr8-btn-default" title="'+e.link.edit+'" data-event="showLinkDialog"><i class="fa fa-edit"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.link.unlink+'" data-event="unlink"><i class="fa fa-unlink"></i></button></div></div></div><div class="note-image-popover libr8-popover libr8-bottom libr8-in"><div class="libr8-arrow"></div><div class="libr8-popover-content note-image-content"><div class="libr8-btn-group"><button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.resizeFull+'" data-event="resize" data-value="1"><span class="note-fontsize-10">100%</span> </button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.resizeHalf+'" data-event="resize" data-value=".5"><span class="note-fontsize-10">50%</span> </button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.resizeQuarter+'" data-event="resize" data-value=".25"><span class="note-fontsize-10">25%</span> </button></div><div class="libr8-btn-group"><button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.floatLeft+'" data-event="floatMe" data-value="left"><i class="fa fa-align-left"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.floatRight+'" data-event="floatMe" data-value="right"><i class="fa fa-align-right"></i></button><button type="button" class="libr8-btn libr8-btn-default" title="'+e.image.floatNone+'" data-event="floatMe" data-value="none"><i class="fa fa-align-justify"></i></button></div><div class="libr8-btn-group"><button type="button" class="libr8-btn libr8-btn-danger" title="'+e.image.remove+'" data-event="removeMedia" data-value="none"><i class="fa fa-trash"></i></button></div></div></div></div>'};var i=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'};var a=function(e,t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+e.shortcut.textFormatting+'</th></tr></thead><tbody><tr><td>⌘ + B</td><td>'+e.font.bold+'</td></tr><tr><td>⌘ + I</td><td>'+e.font.italic+'</td></tr><tr><td>⌘ + U</td><td>'+e.font.underline+'</td></tr><tr><td>⌘ + ⇧ + S</td><td>'+e.font.strike+'</td></tr><tr><td>⌘ + \\</td><td>'+e.font.clear+'</td></tr></tr></tbody></table>'};var f=function(e,t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+e.shortcut.action+'</th></tr></thead><tbody><tr><td>⌘ + Z</td><td>'+e.history.undo+'</td></tr><tr><td>⌘ + ⇧ + Z</td><td>'+e.history.redo+'</td></tr><tr><td>⌘ + ]</td><td>'+e.paragraph.indent+'</td></tr><tr><td>⌘ + [</td><td>'+e.paragraph.outdent+'</td></tr><tr><td>⌘ + ENTER</td><td>'+e.hr.insert+'</td></tr></tbody></table>'};var l=function(e,t){var n='<table class="note-shortcut"><thead><tr><th></th><th>'+e.shortcut.extraKeys+'</th></tr></thead><tbody>';for(var r in t.extraKeys){if(!t.extraKeys.hasOwnProperty(r)){continue}n+='<tr><td>'+r+'</td><td>'+t.extraKeys[r]+'</td></tr>'}n+='</tbody></table>';return n};var c=function(e,t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+e.shortcut.paragraphFormatting+'</th></tr></thead><tbody><tr><td>⌘ + ⇧ + L</td><td>'+e.paragraph.left+'</td></tr><tr><td>⌘ + ⇧ + E</td><td>'+e.paragraph.center+'</td></tr><tr><td>⌘ + ⇧ + R</td><td>'+e.paragraph.right+'</td></tr><tr><td>⌘ + ⇧ + J</td><td>'+e.paragraph.justify+'</td></tr><tr><td>⌘ + ⇧ + NUM7</td><td>'+e.lists.ordered+'</td></tr><tr><td>⌘ + ⇧ + NUM8</td><td>'+e.lists.unordered+'</td></tr></tbody></table>'};var h=function(e,t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+e.shortcut.documentStyle+'</th></tr></thead><tbody><tr><td>⌘ + NUM0</td><td>'+e.style.normal+'</td></tr><tr><td>⌘ + NUM1</td><td>'+e.style.h1+'</td></tr><tr><td>⌘ + NUM2</td><td>'+e.style.h2+'</td></tr><tr><td>⌘ + NUM3</td><td>'+e.style.h3+'</td></tr><tr><td>⌘ + NUM4</td><td>'+e.style.h4+'</td></tr><tr><td>⌘ + NUM5</td><td>'+e.style.h5+'</td></tr><tr><td>⌘ + NUM6</td><td>'+e.style.h6+'</td></tr></tbody></table>'};var p=function(e,t){var n='<table class="note-shortcut-layout"><tbody><tr><td>'+f(e,t)+'</td><td>'+a(e,t)+'</td></tr><tr><td>'+h(e,t)+'</td><td>'+c(e,t)+'</td></tr>';if(t.extraKeys){n+='<tr><td colspan="2">'+l(e,t)+"</td></tr>"}n+="</tbody</table>";return n};var d=function(e){return e.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")};o=function(t,r){var i=function(){var n="";e.getJSON("includes/get_images.php",e.proxy(function(t){e.each(t,e.proxy(function(t,n){var r=e('<img src="'+n.thumb+'" class="libr8-img-thumbnail note-browser" rel="'+n.image+'" title="'+n.title+'"/>');e("#imagebox").append(r);e(r).on("click",function(){var t=e("<img>").attr("src",n.thumb);e(".note-editable").data("range").insertNode(t[0]);e(this).closest(".libr8-modal").modal("hide")})}))}));return'<div class="note-image-dialog libr8-modal" aria-hidden="false"><div class="libr8-modal-dialog"><div class="libr8-modal-content"><div class="libr8-modal-header"><button type="button" class="libr8-close" aria-hidden="true">&times;</button><h4>'+t.image.insert+'</h4></div><div class="libr8-modal-body"><ul class="libr8-nav libr8-nav-tabs"><li class="libr8-active"><a href="#upload" data-toggle="tab">'+t.image.tabUpload+'</a></li><li><a href="#choose" data-toggle="tab">'+t.image.tabChoose+'</a></li><li><a href="#link" data-toggle="tab">'+t.image.tabLink+'</a></li></ul><div class="libr8-tab-content"><div class="libr8-tab-pane libr8-fade libr8-in libr8-active" id="upload"><div class="libr8-form-group"><label class="libr8-control-label libr8-col-sm-2">'+t.image.selectFromFiles+'</label><div class="libr8-input-group libr8-col-sm-10"><input type="file" name="files" class="note-image-input" accept="image/*"/></div></div></div><div class="libr8-tab-pane libr8-fade" id="choose"><h5>'+t.image.fileBrowserTitle+'</h5><div id="imagebox" class="libr8-well files"></div></div><div class="libr8-tab-pane libr8-fade" id="link"><div class="libr8-form-group"><label class="libr8-control-label libr8-col-sm-2">'+t.image.url+'</label><div class="libr8-input-group libr8-col-sm-10"><input class="note-image-url libr8-form-control" type="text"/></div></div></div></div></div><div class="libr8-modal-footer"><button href="#" class="libr8-btn libr8-btn-primary note-image-btn libr8-disabled" disabled="disabled">'+t.image.insert+'</button></div></div></div></div>'};var s=function(){var n="";e.getJSON("includes/get_files.php",e.proxy(function(t){e.each(t,e.proxy(function(t,n){var r=e('<a href="'+n.file+'">'+n.title+'</a><br>');e("#filebox").append(r);e(r).on("click",function(t){t.preventDefault();var r=e("<a>").attr("href",n.file).html(n.title);e(".note-editable").data("range").insertNode(r[0]);e(this).closest(".modal").modal("hide")})}))}));return'<div class="note-link-dialog libr8-modal" aria-hidden="false"><div class="libr8-modal-dialog"><div class="libr8-modal-content"><div class="libr8-modal-header"><button type="button" class="libr8-close" aria-hidden="true">&times;</button><h4>'+t.link.insert+'</h4></div><div class="libr8-modal-body"><ul class="libr8-nav libr8-nav-tabs"><li class="libr8-active"><a href="#links" data-toggle="tab">'+t.link.tabLink+'</a></li><li><a href="#files" data-toggle="tab">'+t.link.tabChoose+'</a></li></ul><div class="libr8-tab-content"><div class="libr8-tab-pane libr8-fade libr8-in libr8-active" id="links"><div class="libr8-form-group"><label class="libr8-control-label libr8-col-sm-2">'+t.link.textToDisplay+'</label><div class="libr8-input-group libr8-col-sm-10"><input class="note-link-text libr8-form-control" disabled type="text"></div></div><div class="libr8-form-group"><label class="libr8-control-label libr8-col-sm-2">'+t.link.url+'</label><div class="libr8-input-group libr8-col-sm-10"><input class="note-link-url libr8-form-control" type="text"></div></div>'+(!r.disableLinkTarget?'<div class="libr8-form-group"><label class="libr8-control-label libr8-col-sm-2"><input type="checkbox" checked></label><div class="libr8-input-group libr8-col-sm-10">'+t.link.openInNewWindow+'</div></div>':'')+'</div><div class="libr8-tab-pane libr8-fade" id="files"><h5>Choose from Uploaded Files</h5><div id="filebox" class="libr8-well files"></div></div></div></div><div class="libr8-modal-footer"><button href="#" class="libr8-btn libr8-btn-primary note-link-btn libr8-disabled" disabled="disabled">'+t.link.insert+'</button></div></div></div></div>'};var o=function(){return'<div class="note-video-dialog libr8-modal" aria-hidden="false"><div class="libr8-modal-dialog"><div class="libr8-modal-content"><div class="libr8-modal-header"><button type="button" class="libr8-close" aria-hidden="true">&times;</button><h4>'+t.video.insert+'</h4></div><div class="libr8-modal-body"><div class="libr8-row-fluid"><div class="libr8-form-group"><label>'+t.video.url+'</label><small class="libr8-text-muted">'+t.video.providers+'</small><input class="note-video-url libr8-form-control" type="text"/></div></div></div><div class="libr8-modal-footer"><button href="#" class="libr8-btn libr8-btn-primary note-video-btn libr8-disabled" disabled="disabled">'+t.video.insert+'</button></div></div></div></div>'};var u=function(){return'<div class="note-help-dialog libr8-modal" aria-hidden="false"><div class="libr8-modal-dialog"><div class="libr8-modal-content"><div class="libr8-modal-body"><button type="button" class="libr8-close" aria-hidden="true">&times;</button><div class="title">'+t.shortcut.shortcuts+'</div>'+(n.bMac?p(t,r):d(p(t,r)))+'<p class="libr8-text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.2</a> · <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> · <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a><br>Additions by <a href="//studiojunkyard.com/" target="_blank">Studio Junkyard</a></p></div></div></div></div>'};return'<div class="note-dialog">'+i()+s()+o()+u()+'</div>'};u=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'};var v=function(t,r){t.find("button").each(function(t,r){var i=e(r);var s=i.attr(n.bMac?"data-mac-shortcut":"data-shortcut");if(s){i.attr("title",function(e,t){return t+" ("+s+")"})}}).tooltip({container:"body",trigger:"hover",placement:r||"top"}).on("click",function(){e(this).tooltip("hide")})};var m=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]];var g=function(t){t.find(".note-color-palette").each(function(){var t=e(this),n=t.attr("data-target-event");var r=[];for(var i=0,s=m.length;i<s;i++){var o=m[i];var u=[];for(var a=0,f=o.length;a<f;a++){var l=o[a];u.push(['<button type="button" class="note-color-btn" style="background-color:',l,';" data-event="',n,'" data-value="',l,'" title="',l,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push("<div>"+u.join("")+"</div>")}t.html(r.join(""))})};this.createLayout=function(n,a){var f=n.next();if(f&&f.hasClass("note-editor")){return}var l=e('<div class="note-editor"></div>');if(a.width){l.width(a.width)}if(a.height>0){e('<div class="note-statusbar">'+u()+"</div>").prependTo(l)}var c=!n.is(":disabled");var h=e('<div class="note-editable" contentEditable="'+c+'"></div>').prependTo(l);if(a.height){h.height(a.height)}if(a.direction){h.attr("dir",a.direction)}h.html(s.html(n)||s.emptyPara);e('<textarea class="note-codable"></textarea>').prependTo(l);var p=e.summernote.lang[a.lang];var d="";for(var m=0,y=a.toolbar.length;m<y;m++){var b=a.toolbar[m];d+='<div class="note-'+b[0]+' libr8-btn-group">';for(var w=0,E=b[1].length;w<E;w++){d+=t[b[1][w]](p)}d+="</div>"}d='<div class="note-toolbar libr8-btn-toolbar">'+d+"</div>";var S=e(d).prependTo(l);g(S);v(S,"bottom");var x=e(r(p)).prependTo(l);v(x);e(i()).prependTo(l);var T=e(o(p,a)).prependTo(l);T.find("button.libr8-close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")});e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(l);l.insertAfter(n);n.hide()};this.layoutInfoFromHolder=function(e){var t=e.next();if(!t.hasClass("note-editor")){return}var n=s.buildLayoutInfo(t);for(var r in n){if(n.hasOwnProperty(r)){n[r]=n[r].call()}}return n};this.removeLayout=function(e){var t=this.layoutInfoFromHolder(e);if(!t){return}e.html(t.editable.html());t.editor.remove();e.show()}};e.summernote=e.summernote||{};e.extend(e.summernote,o);var w=new b;var E=new y;e.fn.extend({summernote:function(t){t=e.extend({},e.summernote.options,t);this.each(function(n,r){var i=e(r);w.createLayout(i,t);var o=w.layoutInfoFromHolder(i);E.attach(o,t);if(s.isTextarea(i[0])){i.closest("form").submit(function(){i.html(i.code())})}});if(this.first()&&t.focus){var n=w.layoutInfoFromHolder(this.first());n.editable.focus()}if(this.length>0&&t.oninit){t.oninit()}return this},code:function(t){if(t===undefined){var r=this.first();if(r.length===0){return}var i=w.layoutInfoFromHolder(r);if(!!(i&&i.editable)){var s=i.editor.hasClass("codeview");if(s&&n.bCodeMirror){i.codable.data("cmEditor").save()}return s?i.codable.val():i.editable.html()}return r.html()}this.each(function(n,r){var i=w.layoutInfoFromHolder(e(r));if(i&&i.editable){i.editable.html(t)}});return this},destroy:function(){this.each(function(t,n){var r=e(n);var i=w.layoutInfoFromHolder(r);if(!i||!i.editable){return}E.dettach(i);w.removeLayout(r)});return this}})})